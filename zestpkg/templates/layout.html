<!DOCTYPE html>
<html>
<head>
{% if title %}
	<title>Zest2O19 | {{title }}</title>
{% else %}
	<title>{{ title }}</title>
{% endif %}
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/bootstrap.min.css') }}">
	<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/animate.css') }}">
	<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/custom.css') }}">
	<link rel="stylesheet" href="{{ url_for('static', filename='css/croppie.css') }}" />
	<script src="{{ url_for('static', filename='js/jquery-3.4.1.min.js') }}"></script>
	<script src="{{ url_for('static', filename='js/bootstrap.min.js') }}"></script>
	<script src="{{ url_for('static', filename='css/croppie.js') }}"></script>
</head>
<body>

<nav class="navbar sticky-top navbar-expand-lg navbar-dark bg-dark">
	<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarlinks" aria-controls="navbarToggleExternalContent" aria-expanded="false" aria-label="Toggle navigation">
		<span class="navbar-toggler-icon"></span>
	</button>
	<div class="collapse navbar-collapse ml-4" id="navbarlinks">
		<a class="navbar-brand mr-auto" href="{{ url_for('main.home') }}">Zest2O19</a>
		<ul class="navbar-nav  mt-2 mt-lg-0 mr-4">
			<li class="nav-item active">
				<a class="nav-link" href="/home">Home <span class="sr-only">(current)</span></a>
			</li>
			<li class="nav-item">
				<a class="nav-link" href="/events">Events</a>
			</li>
			{% if current_user.is_authenticated %}
				<li class="nav-item">
					<a class="nav-link" href="/{{current_user.username}}">My Profile</a>
				</li>
				{% if current_user.verified %}
				<li class="nav-item">
					<a class="nav-link" href="/addevent">Add Event</a>
				</li>
				{% endif %}
				<li class="nav-item">
					<a class="nav-link" href="{{ url_for('users.logout') }}">Logout</a>
				</li>
			{% else %}
				<li class="nav-item">
					<a class="nav-link" href="{{ url_for('users.login') }}">Login</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="{{ url_for('users.register') }}">Register</a>
				</li>
			{% endif %}
  		</ul>
  	</div>
</nav>

<div class="row justify-content-center animated flipInX">
{% with messages = get_flashed_messages(with_categories=True) %}
	{% if messages %}
		{% for category, message in messages %}
			<div class="col-md-4 mt-3 text-center alert alert-{{ category }}" role="alert">
				<span>{{ message }}</span>
			</div>
		{% endfor %}
	{% endif %}
{% endwith %}
</div>

<div class="container-fluid">
	<div class="row">
		<div class="col-3">
			{% block sidebar %}{% endblock sidebar %}
		</div>
		<div class="col-6">
			{% block content %}{% endblock content%}
			<footer class="my-5 text-center animated bounceInUp">
				<div class="container">
					<span class="text-muted">made with &#10084; by <a href="https://github.com/bugswriter/" class="text-danger">@bugswriter</a> - &copy; 2019-2020 </span>
				</div>
			</footer>
		</div>
		<div class="col-3 p-4">
			{% if current_user.is_authenticated %}
			{% set events = current_user.getEvents() %}
			{% if events %}
				<div class="container">
					<div class="card mb-3" style="max-width: 18rem;">
						<div class="card-header">Your Events</div>	
						<div class="container">
							{% for event in events %}
								<div class="row p-2">
									<div class="col">{{ event.title }}</div>
									<div class="col ml-5"><a href="/events/{{event.id}}/withdraw" class="text-danger">[X]</a></div>
								</div>
							{% endfor %}
						</div>
					</div>
				</div>
			{% endif %}
			{% endif %}
		</div>
	</div>
</div>
</body>
</html>