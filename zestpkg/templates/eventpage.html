{% extends 'layout.html' %}
{% block content %}
<div class="text-center mt-4 animated bounceInDown" id="heading">
	<h2>{{ event.title }}</h2>
	{% if current_user.id == event.user_id %}
		<a href="/events/{{event.id}}/update" class="text-muted">update event info</a>
	{% endif %}
	<hr>
</div>
<div class="card animated fadeIn" id="eventpage">
	<img class="card-img-top" src="{{ url_for('static', filename='event_pics/'+event.image) }}" alt="Card image cap">
	<div class="card-body">
		<div>
    		<p class="card-text">{{ event.detail_txt }}</p>
	    </div>
    	<hr>
    	<div class="row">
	    	<div class="col-md-6">
				<h5 class="">{{ event.eventType() }} Event</h5>
				{% if event.eventType() == 'Team' %}
					<small class="text-info">{{ event.team_limit }} member team is required.</small><br>
				{% else %}
					<small class="text-success">You don't need a team.</small><br>
				{% endif %}	
				<span>Time: 3:40pm to 4:30pm</span>
			</div>
			<div class="col-md-6">
				<div class="row organizer">
					<img class="rounded-circle" src="{{ url_for('static', filename='profile_pics/'+user.image) }}">
					<div class="ml-2">
						<span><a href="#">{{ user.name }}</a></span><br>
						<small>{{ user.phone }}</small><br>
						<small class="text-muted">Organizer</small>
					</div>
				</div>
			</div>
		</div>
		<hr>
		
		{% if current_user.is_authenticated %}
			<div class="row justify-content-around">
				{% if event.eventType() == 'Solo' %}
				<a href="/events/{{ event.id }}/participate" class="btn btn-success">Take Participation</a>
				{% else %}
				<div class="col text-center">
					<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#createteam">
					  Create team
					</button>
				</div>
				<div class="col text-center">
					<button type="button" class="btn btn-outline-info" data-toggle="modal" data-target="#jointeam">
						Join team
					</button>
				</div>
				{% endif %}
			</div>
		{% endif %}
	</div>	
</div>

<div class="modal" id="createteam" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title" id="exampleModalLongTitle">Create Team</h5>
				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">&times;</span>
				</button>
			</div>
			<form action="/events/{{ event.id }}/create_team" method="GET">
				<div class="modal-body">
					<div class="form-group p-3">
						<input class="form-control" type="text" placeholder="Enter team name" name="team_name">
						<small class="mt-4">This name should be unique and you are allowed to only add {{ event.team_limit }} members in team.</small>
					</div>
				</div>
				<div class="modal-footer">
				    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
					<input type="submit" class="btn btn-primary" value="Create team">
				</div>
			</form>
		</div>
	</div>
</div>

<div class="modal" id="jointeam" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title" id="exampleModalLongTitle">Join team</h5>
				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">&times;</span>
				</button>
			</div>
			<form action="/events/{{ event.id }}/join_team" method="GET">
				<div class="modal-body">
					<div class="form-group p-3">
						<input class="m-auto form-control" type="text" placeholder="Enter secret code" name="team_code">
						<small class="mt-4">If you don't know what secret code is, it is unique alphanumeric secret key which allow anyone to join the party. If you want to join your friends team. </small>
					</div>
				</div>
				<div class="modal-footer">
				    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
					<input type="submit" class="btn btn-primary" value="Join team">
				</div>
			</form>
		</div>
	</div>
</div>
{% endblock%}