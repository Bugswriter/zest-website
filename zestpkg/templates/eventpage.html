{% extends 'layout.html' %}
{% block content %}
<style type="text/css">
	.event-info{
		font-size: 18px;
	}
</style>

<div class="card mt-5">
	<img class="card-img-top" src="{{ url_for('static', filename='event_pics/'+event.image) }}" alt="Card image cap">
	<div class="card-body">
  		<div class="ml-3">
    		<h2 class="card-title animated fadeInRight">{{ event.title }}</h2>
    		<h6 class="card-subtitle mb-2 animated fadeInRight"><a href="/events/{{event.id}}/update" class="text-muted">update event info</a></h6>
    		<p class="card-text animated fadeInRight" style="line-height: 2em; max-width: 70%;">{{ event.detail_txt }}</p>
		</div>
    	<hr>
    	<div class="row">
	    	<div class="col ml-3">
				<h5 class="animated fadeInRight">{{ event.eventType() }} Event</h5>
				{% if event.eventType() == 'Team' %}
					<small class="text-info">{{ event.team_limit }} member team is required.</small><br>
				{% else %}
					<small class="text-success">You don't need a team.</small><br>
				{% endif %}	
				<span>Day 1 | Time: 3:40pm to 4:30pm</span>
			</div>
			<div class="col-3 mr-5 animat">
				<img class="rounded-circle" width="75px" height="75px" src="{{ url_for('static', filename='profile_pics/'+user.image) }}">
				<div class="float-right">
					<span><a href="#">{{ user.name }}</a></span><br>
					<small>{{ user.phone }}</small><br>
					<small class="text-muted">Organizer</small>
				</div>
			</div>
		</div>
		
		{% if current_user.is_authenticated %}
			<hr>
			<div class="row justify-content-center">
				<div class="col ml-3 p-3">
					{% if event.eventType() == 'Solo' %}
						<button class="btn btn-success animated flash">Take Participation</button>
					{% else %}
						<button type="button" class="btn btn-primary animated flash" data-toggle="modal" data-target="#createteam">
						  Create a new team
						</button>
						<button type="button" class="btn btn-outline-info animated flash" data-toggle="modal" data-target="#jointeam">
							Join team
						</button>
					{% endif %}
				</div>
			</div>
		{% endif %}
	</div>	
</div>

<div class="modal" id="createteam" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
	<div class="modal-dialog modal-dialog-centered" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title" id="exampleModalLongTitle">Create Team</h5>
				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">&times;</span>
				</button>
			</div>
			<form action="/events/{{ event.id }}/create_team" method="GET">
				<div class="modal-body">
					<div class="form-group p-3">
						<input class="form-control" type="text" placeholder="Enter team name" name="team_name">
						<small class="mt-4">This name should be unique and you are allowed to only add {{ event.team_limit }} members in team.</small>
					</div>
					
				</div>
				<div class="modal-footer">
				    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
					<input type="submit" class="btn btn-primary" value="Create team">
				</div>
			</form>
		</div>
	</div>
</div>

<div class="modal" id="jointeam" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
	<div class="modal-dialog modal-dialog-centered" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title" id="exampleModalLongTitle">Join team</h5>
				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">&times;</span>
				</button>
			</div>
			<form action="/events/{{ event.id }}/join_team" method="GET">
				<div class="modal-body">
					<div class="form-group p-3">
						<input class="m-auto form-control" type="text" placeholder="Enter secret code" name="team_code">
						<small class="mt-4">If you don't know what secret code is, it is unique alphanumeric secret key which allow anyone to join the party. If you want to join your friends team. </small>
					</div>
				</div>
				<div class="modal-footer">
				    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
					<input type="submit" class="btn btn-primary" value="Join team">
				</div>
			</form>
		</div>
	</div>
</div>
{% endblock%}